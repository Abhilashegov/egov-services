ServiceMaps:
 serviceName: Water Charges
 version: 1.0.0
 mappings:
  - topic: egov.wcms.newconnection-create
    indexes:
    - name: watercharges
      type: consumerdetails
      id: $.Connection.id
      isBulk: false
      jsonPath:
      customJsonMapping:
        indexMapping: {"ConnectionIndex":{"ConnectionDetailsEs":{"id":13567,"connectionType":"PERMANENT","applicationType":"NEWCONNECTION",
        "hscPipeSizeType":19.05,"pipesizeId":18,"executionDate":null,"supplyType":"SemiBulkType","noOfFlats":0,"supplyTypeId":11}}}
        fieldMapping:
        - inJsonPath: $.Connection.supplyType
          outJsonPath: $.ConnectionIndex.ConnectionDetailsEs.supplyType
        - inJsonPath: $.Connection.hscPipeSizeType
          outJsonPath: $.ConnectionIndex.ConnectionDetailsEs.hscPipeSizeType
        uriMapping:
        - path: http://egov-micro-dev.egovernments.org/wcms-connection/connection/_create
          apiRequest: 
          uriResponseMapping:
          - inJsonPath: $.Connection.hscPipeSizeType
            outJsonPath: $.ConnectionIndex.ConnectionDetailsEs.hscPipeSizeType
          - inJsonPath: $.Connection.hscPipeSizeType
            outJsonPath: $.ConnectionIndex.ConnectionDetailsEs.hscPipeSizeType
          - inJsonPath: $.Connection.hscPipeSizeType
            outJsonPath: $.ConnectionIndex.ConnectionDetailsEs.hscPipeSizeType

        - path: http://egov-micro-dev.egovernments.org/wcms-connection/connection/_search
          apiRequest: 
          uriResponseMapping:
          - inJsonPath: $.Connection.hscPipeSizeType
            outJsonPath: $.ConnectionIndex.ConnectionDetailsEs.hscPipeSizeType
          - inJsonPath: $.Connection.hscPipeSizeType
            outJsonPath: $.ConnectionIndex.ConnectionDetailsEs.hscPipeSizeType
          - inJsonPath: $.Connection.hscPipeSizeType
            outJsonPath: $.ConnectionIndex.ConnectionDetailsEs.hscPipeSizeType
