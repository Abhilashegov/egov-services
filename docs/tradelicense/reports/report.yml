---
ReportDefinitions:
- reportName: licenseRegisterReport
  summary: Trade License Register Report
  version: 1.0.0
  moduleName: tradelicense
  sourceColumns:
  - name: ward
    label: reports.tradelicense.adminward
    type: string
    source: tradelicense
    showColumn: true
  - name: licenseNumber
    label: reports.tradelicense.licenseno
    type: string
    source: tradelicense
  - name: tradeType
    label: reports.tradelicense.tradetype
    type: string
    source: tradelicense
  - name: licenseHolder
    label: reports.tradelicense.licenseholder
    type: string
    source: tradelicense
  - name: patners
    label: reports.tradelicense.partners
    type: string
    source: tradelicense
  - name: businessName
    label: reports.tradelicense.businessname
    type: string
    source: tradelicense
  - name: businessAddress
    label: reports.tradelicense.businessaddress
    type: string
    source: tradelicense
  - name: businessArea
    label: reports.tradelicense.businessarea
    type: string
    source: tradelicense
  - name: licenseValidity
    label: reports.tradelicense.licensevalidity
    type: string
    source: tradelicense
  - name: licenseType
    label: reports.tradelicense.licensetype
    type: string
    source: tradelicense
  - name: licenseSubType
    label: reports.tradelicense.licensesubtype
    type: string
    source: tradelicense
  - name: licenseStatus
    label: reports.tradelicense.licensestatus
    type: string
    source: tradelicense
  - name: paymentHistory
    label: reports.tradelicense.paymenthistory
    type: string
    source: tradelicense
  - name: aadharNo
    label: reports.tradelicense.aadharno
    type: string
    source: tradelicense
  - name: propertyNo
    label: reports.tradelicense.propertyno
    type: string
    source: tradelicense
  searchParams:
  - name: ward
    label: reports.tradelicense.adminward
    type: singlevaluelist
    pattern: http://egov-location:8080/boundarys/boundariesByBndryTypeNameAndHierarchyTypeName?tenantId=$tenantId&boundaryTypeName=LOCALITY&hierarchyTypeName=LOCATION&pageSize=500|$..id|$..name
    source: tradelicense
    isMandatory: false
    searchClause : AND tl.ward = $ward
  - name: licenseNo
    label: reports.tradelicense.licenseno
    type: string
    source: tradelicense
    isMandatory: false
    searchClause : AND tl.licensenumber = $licenseNo
  - name: tradeType
    label: reports.tradelicense.tradetype
    type: singlevaluelist
    pattern: 'list://PERMANENT:PERMANENT,TEMPORARY:TEMPORARY'
    isMandatory: false
    source: tradelicense
    searchClause : AND tl.tradetype = $tradeType
  - name: licenseHolder
    label: reports.tradelicense.licenseholder
    type: string
    source: tradelicense
    isMandatory: false
    searchClause : AND tl.owenername = $licenseHolder
  - name: businessName
    label: reports.tradelicense.businessname
    type: string
    source: tradelicense
    isMandatory: false
    searchClause : AND tl.tradetitle = $businessName
  - name: licenseValidFromDate
    label: reports.tradelicense.licensevalidfromdate
    type: epoch
    source: tradelicense
    isMandatory: false
    searchClause : AND tl.licensevalidfromdate = $licenseValidFromDate
  - name: licenseValidToDate
    label: reports.tradelicense.licensevalidtodate
    type: epoch
    source: tradelicense
    isMandatory: false
    searchClause : AND tl.expirydate = $licenseValidToDate
  - name: licenseType
    label: reports.tradelicense.licensetype
    type: singlevaluelist
    pattern: http://tl-masters:8080/category/v1/_search?tenantId=$tenantId&pageSize=500|$..id|$..name
    source: tradelicense
    isMandatory: false
    searchClause : AND tl.categoryid = $licenseType
  - name: licenseSubType
    label: reports.tradelicense.licensesubtype
    type: url
    pattern: http://tl-masters:8080/category/v1/_search?tenantId=$tenantId&type=SUBCATEGORY&categoryId={licenseType}&pageSize=500|$..id|$..name
    source: tradelicense
    isMandatory: false
    searchClause : AND tl.subcategoryid = $licenseSubType
  - name: licenseStatus
    label: reports.tradelicense.licensestatus
    type: singlevaluelist
    pattern: http://tl-masters:8080/status/v1/_search?tenantId=default&pageSize=500|$..id|$..name
    source: tradelicense
    isMandatory: false
    searchClause : AND tl.status = $licenseStatus
  - name: aadharNumber
    label: reports.tradelicense.aadharno
    type: string
    source: tradelicense
    isMandatory: false
    searchClause : AND tl.adhaarnumber = $aadharNumber
  - name: propertyNo
    label: reports.tradelicense.propertyno
    type: string
    source: tradelicense
    isMandatory: false
    searchClause : AND tl.propertyassesmentno = $propertyNo
  query: select ward.name as ward, tl.licensenumber as licenseNumber, tl.tradetype as tradeType, tl.ownername as licenseHolder,
    tl.owneraddress as license_holder_address, tl.tradetitle as businessName, tl.tradeaddress as businessAddress,
    locality.name as businessArea, tl.licensevalidfromdate as licenseValidFromDate, tl.expirydate as licenseValidToDate,
    category.name as licenseType, subcategory.name as licenseSubType, tl.status as licenseStatus, tl.adhaarnumber as aadharNo,
    tl.propertyassesmentno as propertyNo from egtl_license as tl, eg_boundary as ward, eg_boundary as locality,
    egtl_mstr_category as category, egtl_mstr_category as subcategory where ward.id = tl.adminwardid and locality.id = tl.localityid
    and tl.categoryid = category.id and tl.subcategoryid = subcategory.id and tl.tenantid = $tenantid
  orderBy: order by tl.id;
