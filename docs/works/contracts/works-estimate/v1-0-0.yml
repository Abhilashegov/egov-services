swagger: '2.0'
# eGSP YAML Template Version: 1.0 
# This is a version number for the YAML template. This must not be changed.

info:
  version: 1.0.0
  ######################################################
  # All API's are POST. _create,_search,_update for post,get and put. RequestInfo will be part of body. For multiple records we can pass multiple value with comman seperated values*.
  # All _search will be synchronous and all _create and _update will be asynchronous*.
  # RequestInfo and ResponseInfo object should be reffered from Common*.
  # In _search API, tenantId should be passed in query param. In _create/_update, tenantId should be passed in the model.
  # Readonly means that even if these fields are passed in the request, it will be ignored in create/update and will not be added/updated in the entities. The readonly fields might be passed to the _search API's to make use of fields for the search Query API. while calling _search API's even mandatory fields might not be available, it is mandatory only in the _create API's*.
  # All errors will be returned with HTTP error code 400 with customized error code and messages. Consumer of the API need to handle 400 with customized error code and message.
  # Definition must start with Upper case followed by camel case.
  # Every model will have tenantId. Validate tenantId on create.
  # Parameter name must start with small case followed by camel case.
  # Path must be in small case.
  ######################################################
  
  title: eGov Works Management System - Estimate.
  description: |
    APIs for Works Management module. This module handles creation of Abstract Estimate, Detailed Estimate, Revision Estimate, Estimate Appropriation, Estimate Photographs.
  contact:
    name: eGovernments Foundation
    email : contacts@egovernments.org
schemes:
  - https
basePath: '/works-estimate/v1'
x-api-id: 'org.egov.works.estimate'
x-common-path: 'https://raw.githubusercontent.com/egovernments/egov-services/master/docs/common/contracts/v1-0-0.yml'
paths:
  /abstractestimates/_search:
    post:
      summary: Get the list of Abstract Estimate(s) defined in the system.
      description: |
          Search and get Abstract Estimate(s) based on defined search criteria.
          Currently search parameters are only allowed as HTTP query params.
          
          In case multiple parameters are passed Abstract Estimate(s) will be searched as an AND combination of all the parameters.
          
          Maximum result size is restricted based on the maxlength of Abstract Estimate as defined in AbstractEstimateResponse model.
          
          Search results will be sorted by the sortProperty Provided in the parameters
      parameters:
        - $ref: "https://raw.githubusercontent.com/egovernments/egov-services/master/docs/common/contracts/v1-0-0.yml#/parameters/requestInfo"
        - $ref: "https://raw.githubusercontent.com/egovernments/egov-services/master/docs/common/contracts/v1-0-0.yml#/parameters/tenantId"
        - $ref: "https://raw.githubusercontent.com/egovernments/egov-services/master/docs/works/contracts/works-common/v1-0-0.yml#/parameters/pageSize"
        - $ref: "https://raw.githubusercontent.com/egovernments/egov-services/master/docs/works/contracts/works-common/v1-0-0.yml#/parameters/pageNumber"
        - $ref: "https://raw.githubusercontent.com/egovernments/egov-services/master/docs/works/contracts/works-common/v1-0-0.yml#/parameters/sortProperty"
        - name: adminSanctionNumbers
          in: query
          description: Comma separated list of Admin Sanction Numbers of Abstract Estimates
          required: false
          type: string
          allowEmptyValue: true
        - name: ids
          type: array
          items:
            type: string
          in: query
          maxItems: 50
          description: Comma separated list of Ids of Abstract Estimate to get the Abstract Estimates
        - name: estimateNumbers
          in: query
          required: false
          description: Comma separated list of estimate numbers of Abstract Estimate
          type: string
        - name: departmentCode
          in: query
          required: false
          description: The Department code for which Abstract Estimate belongs to.
          type: string
        - name: fundCode
          in: query
          required: false
          description: The Fund code for which Abstract Estimate belongs to.
          type: string
        - name: functionCode
          in: query
          required: false
          description: The Function code for which Abstract Estimate belongs to.
          type: string
        - name: budgetHeadCode
          in: query
          required: false
          description: The Budget Head Code for which Abstract Estimate belongs to.
          type: string
        - name: adminSanctionFromDate
          in: query
          required: false
          description: Epoch time from when the Abstract Estimate is Admin Sanctioned
          type: integer
          format: int64
        - name: adminSanctionToDate
          in: query
          description: Epoch time till the Abstract Estimate is Admin Sanctioned
          required: false
          type: integer
          format: int64
        - name: spillOverFlag
          in: query
          description: Boolean value to identify whether the Abstract Estimate is Spill over or not.
          required: false
          type: boolean
        - name: createdBy
          in: query
          description: Unique user name of the User who created the Abstract Estimate.
          required: false
          type: string
        - name: abstractEstimateNumbers
          in: query
          required: false
          description: Comma separated list of abstract estimate numbers of the Abstract Estimate.
          type: array
          items:
            type: string
        - name: workIdentificationNumbers
          in: query
          description: Comma separated list of Work Identification Numbers assigned to Abstract Estimate.
          required: false
          type: array
          items:
            type: string
        - name: status
          in: query
          description: Status of the Abstract Estimate.
          required: false
          type: string
      responses:
        200:
          description: Abstract Estimate(s) Retrieved Successfully
          schema:
            $ref: "#/definitions/AbstractEstimateResponse"
        '400':
          description: Invalid input.
          schema:
            $ref: 'https://raw.githubusercontent.com/egovernments/egov-services/master/docs/common/contracts/v1-0-0.yml#/definitions/ErrorRes'
      tags:
       - Abstract Estimate
       
  /abstractestimates/_create:
    post:
      summary: Create new Abstract Estimate(s).
      description: |
          To create new Abstract Estimate in the system. API supports bulk creation with max limit as defined in the Abstract Estimate Request. Please note that either whole batch succeeds or fails, there's no partial batch success. To create one Abstract Estimate, please pass array with one Abstract Estimate object.
          Reference type will be allowed to edit in case of on going abstract estimate and disabled for spillover abstract estimate.
          All the flags like spillover, detiled estimate and bills created flag will be allowed to select only in case Spillover abstract estimate.
          
      parameters:
        - name: AbstractEstimateRequest
          in: body
          description: Details of new AbstractEstimate(s) + RequestInfo meta data.
          required: true
          schema:
            $ref: '#/definitions/AbstractEstimateRequest'
      
      responses:
      ####################################################
      # All errors will be returned with HTTP error code 400 with customized error code and messages. Consumer of the API need to handle 400 with customized error code and message
      ###################################################
        201:
          description: Abstract Estimate(s) created successfully
          schema:
            $ref: '#/definitions/AbstractEstimateResponse'
        400:
          description: Abstract Estimate(s) creation failed
          schema:
            $ref: 'https://raw.githubusercontent.com/egovernments/egov-services/master/docs/common/contracts/v1-0-0.yml#/definitions/ErrorRes'
      tags:
        - Abstract Estimate
        
  /abstractestimates/_update:
    post:
      summary: Update existing Abstract Estimate(s).
      description: |
          To update existing Abstract Estimate in the system. API supports bulk updation with max limit as defined in the Abstract Estimate Request. Please note that either whole batch succeeds or fails, there's no partial batch success. To update one Abstract Estimate, please pass array with one Abstract Estimate object.
          In update all the fields are disabled except the Work Flow Deatils and the fields which needs to be captured at different status are enabled.
          At the last level of workflow gross amount billed amount will be editable.
          
      parameters:
        - name: AbstractEstimateRequest
          in: body
          description: Details of AbstractEstimate(s) + RequestInfo meta data.
          required: true
          schema:
            $ref: '#/definitions/AbstractEstimateRequest'
      
      responses:
      ####################################################
      # All errors will be returned with HTTP error code 400 with customized error code and messages. Consumer of the API need to handle 400 with customized error code and message
      ###################################################
        201:
          description: Abstract Estimate(s) updated successfully
          schema:
            $ref: '#/definitions/AbstractEstimateResponse'
        400:
          description: Abstract Estimate(s) updation failed
          schema:
            $ref: 'https://raw.githubusercontent.com/egovernments/egov-services/master/docs/common/contracts/v1-0-0.yml#/definitions/ErrorRes'
      tags:
        - Abstract Estimate
        
  /detailedestimates/_search:
    post:
      summary: Get the list of Detailed Estimate(s) defined in the system.
      description: |
          Search and get Detailed Estimate(s) based on defined search criteria.
          Currently search parameters are only allowed as HTTP query params.
          
          In case multiple parameters are passed Detailed Estimate(s) will be searched as an AND combination of all the parameters.
          
          Maximum result size is restricted based on the maxlength of Detailed Estimate as defined in DetailedEstimateResponse model.
          
          Search results will be sorted by the sortProperty Provided in the parameters
      parameters:
        - $ref: "https://raw.githubusercontent.com/egovernments/egov-services/master/docs/common/contracts/v1-0-0.yml#/parameters/requestInfo"
        - $ref: "https://raw.githubusercontent.com/egovernments/egov-services/master/docs/common/contracts/v1-0-0.yml#/parameters/tenantId"
        - $ref: "https://raw.githubusercontent.com/egovernments/egov-services/master/docs/works/contracts/works-common/v1-0-0.yml#/parameters/pageSize"
        - $ref: "https://raw.githubusercontent.com/egovernments/egov-services/master/docs/works/contracts/works-common/v1-0-0.yml#/parameters/pageNumber"
        - $ref: "https://raw.githubusercontent.com/egovernments/egov-services/master/docs/works/contracts/works-common/v1-0-0.yml#/parameters/sortProperty"
        - name: detailedEstimateNumbers
          in: query
          description: Comma separated list of Detailed Estimate Numbers to get the Detailed Estimates
          required: false
          type: array
          items:
            type: string
          allowEmptyValue: true
        - name: ids
          type: array
          items:
            type: string
          in: query
          maxItems: 50
          description: Comma separated list of Ids of Detailed Estimate to get the Detailed Estimates
        - name: fromDate
          in: query
          required: false
          description: Epoch time from when the Detailed Estimate created
          type: integer
          format: int64
        - name: toDate
          in: query
          required: false
          description: Epoch time till when the Detailed Estimate created
          type: integer
          format: int64
        - name: departmentCode
          in: query
          required: false
          description: The Department code for which Detailed Estimate belongs to.
          type: string
        - name: status
          in: query
          required: false
          description: The Status of the Detailed Estimate.
          type: string
        - name: workIdentificationNumber
          in: query
          required: false
          description: Comma Separated List of Work Identification Numbers of the Detailed Estimate.
          type: array
          items:
            type: string
        - name: abstractEstimateNumbers
          in: query
          required: false
          description: Comma separated list of Abstract Estimate Numbers for which Detailed Estimate belongs to.
          type: array
          items:
            type: string
        - name: estimateAmount
          in: query
          required: false
          description: Estimate Amount of the Detailed Estimate
          type: integer
          format: double
        - name: wardCode
          in: query
          required: false
          description: Ward code for which Detailed Estimate belongs to
          type: string
        - name: spillOverFlag
          in: query
          description: Boolean value of the Detailed Estimate whether its Spill over or not.
          required: false
          type: boolean
        - name: createdBy
          in: query
          description: Unique user name of the User who created the Detailed Estimate.
          required: false
          type: string
        - name: currentOwner
          in: query
          description: Unique user name of the User who owns(work flow user) the Detailed Estimate.
          required: false
          type: string
      responses:
        200:
          description: Detailed Estimate(s) Retrieved Successfully
          schema:
            $ref: "#/definitions/DetailedEstimateResponse"
        '400':
          description: Invalid input.
          schema:
            $ref: 'https://raw.githubusercontent.com/egovernments/egov-services/master/docs/common/contracts/v1-0-0.yml#/definitions/ErrorRes'
      tags:
       - Detailed Estimate
       
  /detailedestimates/_create:
    post:
      summary: Create new Detailed Estimate(s).
      description: |
          To create new Detailed Estimate in the system. API supports bulk creation with max limit as defined in the Detailed Estimate Request. Please note that either whole batch succeeds or fails, there's no partial batch success. To create one Detailed Estimate, please pass array with one Detailed Estimate object.
          Detailed Estimate will created for Approved Abstract Estimate.
          To create an Detailed estimate Atleast one SOR is mandatory.
          All the fields related to Abstract estimate are in disabled mode.
          If overhead's are selected then based on that (percentage or amount) will be applacable on Estimate value.
          If deduction's are selected then based on that (percentage or amount) will be applacable on Estimate value.
          
      parameters:
        - name: DetailedEstimateRequest
          in: body
          description: Details of the new Detailed Estimate(s) + RequestInfo meta data.
          required: true
          schema:
            $ref: '#/definitions/DetailedEstimateRequest'
      
      responses:
      ####################################################
      # All errors will be returned with HTTP error code 400 with customized error code and messages. Consumer of the API need to handle 400 with customized error code and message
      ###################################################
        201:
          description: Detailed Estimate(s) created successfully
          schema:
            $ref: '#/definitions/DetailedEstimateResponse'
        400:
          description: Detailed Estimate(s) creation failed
          schema:
            $ref: 'https://raw.githubusercontent.com/egovernments/egov-services/master/docs/common/contracts/v1-0-0.yml#/definitions/ErrorRes'
      tags:
        - Detailed Estimate 
        
  /detailedestimates/_update:
    post:
      summary: Update existing Detailed Estimate(s).
      description: |
          To update existing Detailed Estimate in the system. API supports bulk updation with max limit as defined in the Detailed Estimate Request. Please note that either whole batch succeeds or fails, there's no partial batch success. To update one Detailed Estimate, please pass array with one Detailed Estimate object.
          In update all the fields are disabled except the Work Flow Deatils and the fields which needs to be captured at different status are enabled.
          
      parameters:
        - name: DetailedEstimateRequest
          in: body
          description: Details of Detailed Estimate(s) + RequestInfo meta data.
          required: true
          schema:
            $ref: '#/definitions/DetailedEstimateRequest'
      
      responses:
      ####################################################
      # All errors will be returned with HTTP error code 400 with customized error code and messages. Consumer of the API need to handle 400 with customized error code and message
      ###################################################
        201:
          description: Detailed Estimate(s) updated successfully
          schema:
            $ref: '#/definitions/DetailedEstimateResponse'
        400:
          description: Detailed Estimate(s) updation failed
          schema:
            $ref: 'https://raw.githubusercontent.com/egovernments/egov-services/master/docs/common/contracts/v1-0-0.yml#/definitions/ErrorRes'
      tags:
        - Detailed Estimate
        
  /revisionestimates/_search:
    post:
      summary: Get the list of Revision Estimate(s) defined in the system.
      description: |
          Search and get Revision Estimate(s) based on defined search criteria.
          Currently search parameters are only allowed as HTTP query params.
          
          In case multiple parameters are passed Revision Estimate(s) will be searched as an AND combination of all the parameters.
          
          Maximum result size is restricted based on the maxlength of Revision Estimate as defined in RevisionEstimateResponse model.
          
          Search results will be sorted by the sortProperty Provided in the parameters
      parameters:
        - $ref: "https://raw.githubusercontent.com/egovernments/egov-services/master/docs/common/contracts/v1-0-0.yml#/parameters/requestInfo"
        - $ref: "https://raw.githubusercontent.com/egovernments/egov-services/master/docs/common/contracts/v1-0-0.yml#/parameters/tenantId"
        - $ref: "https://raw.githubusercontent.com/egovernments/egov-services/master/docs/works/contracts/works-common/v1-0-0.yml#/parameters/pageSize"
        - $ref: "https://raw.githubusercontent.com/egovernments/egov-services/master/docs/works/contracts/works-common/v1-0-0.yml#/parameters/pageNumber"
        - $ref: "https://raw.githubusercontent.com/egovernments/egov-services/master/docs/works/contracts/works-common/v1-0-0.yml#/parameters/sortProperty"
        - name: revisionEstimateNumbers
          in: query
          description: Comma separated list of Revision Estimate Numbers to get the Revision Estimates
          required: false
          type: array
          items:
            type: string
          allowEmptyValue: true
        - name: ids
          type: array
          items:
            type: string
          in: query
          maxItems: 50
          description: Comma separated list of Ids of Revision Estimate to get the Revision Estimates
        - name: fromDate
          in: query
          required: false
          description: Epoch time from when the Revision Estimate created
          type: integer
          format: int64
        - name: toDate
          in: query
          required: false
          description: Epoch time till when the Revision Estimate created
          type: integer
          format: int64
        - name: status
          in: query
          required: false
          description: The Status of the Revision Estimate.
          type: string
        - name: createdBy
          in: query
          description: Unique user name of the User who created the Revision Estimate.
          required: false
          type: string
        - name: currentOwner
          in: query
          description: Unique user name of the User who owns(work flow user) the Revision Estimate.
          required: false
          type: string
      responses:
        200:
          description: Revision Estimate(s) Retrieved Successfully
          schema:
            $ref: "#/definitions/RevisionEstimateResponse"
        '400':
          description: Invalid input.
          schema:
            $ref: 'https://raw.githubusercontent.com/egovernments/egov-services/master/docs/common/contracts/v1-0-0.yml#/definitions/ErrorRes'
      tags:
       - Revision Estimate
       
  /revisionestimates/_create:
    post:
      summary: Create new Revision Estimate(s).
      description: |
          To create new Revision Estimate in the system. API supports bulk creation with max limit as defined in the Revision Estimate Request. Please note that either whole batch succeeds or fails, there's no partial batch success. To create one Revision Estimate, please pass array with one Revision Estimate object. Revision Estimate will be created for Approved Letter of Acceptance. Revision Estimate extends Detailed Estimate.
          
      parameters:
        - name: RevisionEstimateRequest
          in: body
          description: Details of the new Revision Estimate(s) + RequestInfo meta data.
          required: true
          schema:
            $ref: '#/definitions/RevisionEstimateRequest'
      
      responses:
      ####################################################
      # All errors will be returned with HTTP error code 400 with customized error code and messages. Consumer of the API need to handle 400 with customized error code and message
      ###################################################
        201:
          description: Revision Estimate(s) created successfully
          schema:
            $ref: '#/definitions/RevisionEstimateResponse'
        400:
          description: Revision Estimate(s) creation failed
          schema:
            $ref: 'https://raw.githubusercontent.com/egovernments/egov-services/master/docs/common/contracts/v1-0-0.yml#/definitions/ErrorRes'
      tags:
        - Revision Estimate 
        
  /revisionestimates/_update:
    post:
      summary: Update existing Revision Estimate(s).
      description: |
          To update existing Revision Estimate in the system. API supports bulk updation with max limit as defined in the Revision Estimate Request. Please note that either whole batch succeeds or fails, there's no partial batch success. To update one Revision Estimate, please pass array with one Revision Estimate object.
          In update all the fields are disabled except the Work Flow Deatils and the fields which needs to be captured at different status are enabled.
          
      parameters:
        - name: RevisionEstimateRequest
          in: body
          description: Details of Revision Estimate(s) + RequestInfo meta data.
          required: true
          schema:
            $ref: '#/definitions/RevisionEstimateRequest'
      
      responses:
      ####################################################
      # All errors will be returned with HTTP error code 400 with customized error code and messages. Consumer of the API need to handle 400 with customized error code and message
      ###################################################
        201:
          description: Revision Estimate(s) updated successfully
          schema:
            $ref: '#/definitions/RevisionEstimateResponse'
        400:
          description: Revision Estimate(s) updation failed
          schema:
            $ref: 'https://raw.githubusercontent.com/egovernments/egov-services/master/docs/common/contracts/v1-0-0.yml#/definitions/ErrorRes'
      tags:
        - Revision Estimate
       
definitions:
########################################################
#RequestInfo and ResponseInfo object should be reffered from Common.
#Definition must start with Upper case followed by camel case.
#Every model will have tenantId
########################################################

  AbstractEstimateRequest:
      description: Contract class to send response. Array of AbstractEstimate items are used in case of search results, also multiple  AbstractEstimate item is used for create and update
      properties:
        requestInfo:
          $ref: 'https://raw.githubusercontent.com/egovernments/egov-services/master/docs/common/contracts/v1-0-0.yml#/definitions/RequestInfo'
        abstractEstimates:
          description: Used for create and update only
          type: array
          minimum: 1
          maximum: 100
          items:
            $ref: '#/definitions/AbstractEstimate'

  AbstractEstimateResponse:
      description: Contract class to send response. Array of AbstractEstimate items are used in case of search results, also multiple  AbstractEstimate item is used for create and update
      properties:
        responseInfo:
          $ref: 'https://raw.githubusercontent.com/egovernments/egov-services/master/docs/common/contracts/v1-0-0.yml#/definitions/ResponseInfo'
        abstractEstimates:
          description: Used for search result and create only
          type: array
          maximum: 500
          items:
            $ref: '#/definitions/AbstractEstimate'
    
  AbstractEstimate:
    type: object
    description: Object holds the basic data for a AbstractEstimate
    properties:
      id:
        type: string
        description: Unique Identifier of the Abstract Estimate
      tenantId:
        type: string
        description: Tenant id of the Abstract Estimate
        maxLength: 128
        minLength: 4
      abstractEstimateNumber:
        type: string
        pattern: '[a-zA-Z0-9-\\]'
        description: Unique number for the Abstract Estimate
        maxLength: 20
        minLength: 3
      subject:
        type: string
        description: Subject of Abstract Estimate
        maxLength: 100
        minLength: 3
      fund:
        type: string
        description: Fund of the Abstract Estimate
      referenceType:
        type: string
        description: Reference Type of the Abstract Estimate
        maxLength: 128
        minLength: 3
      referenceNumber:
        type: string
        description: Letter Reference Number of the Abstract Estimate
        maxLength: 100
        minLength: 3
      function:
        type: string
        description: Function of the Abstract Estimate
      description:
        type: string
        description : description for the Abstract Estimate
        pattern: "[0-9a-zA-Z_@./#&+-/!(){}\",^$%*|=;:<>?`~ ]"
        maxLength: 1024
        minLength: 3
      budgetHead:
        type: string
        description: Budget head of the Abstract Estimate
      scheme:
        type: string
        description: Scheme of the Abstract Estimate
      subScheme:
        type: string
        description: Sub scheme of the Abstract Estimate
      dateOfProposal:
        type: integer
        format: int64
        description: Epoch time of the Date of Proposal
      department:
        type: string
        description: Department for which Abstract Estimate belongs to
      adminSanctionNumber:
        type: string
        pattern: '[a-zA-Z0-9-\\]'
        description: Unique number after admin sanction for the Abstract Estimate
        maxLength: 50
        minLength: 3
      adminSanctionDate:
        type: integer
        format: int64
        description:  Epoch time of when the admin santion done
      adminSanctionBy:
        type: string
        description: User who admin sanctioned
      abstractEstimateDetails:
        type: array
        description: Array of Abstract Estimate Details
        minItems: 1
        items:
          $ref: '#/definitions/AbstractEstimateDetails'
      documentDetails:
        type: array
        description: Array of document details
        items:
          $ref: 'https://raw.githubusercontent.com/egovernments/egov-services/master/docs/works/contracts/works-common/v1-0-0.yml#/definitions/DocumentDetail'
      status:
        $ref: 'https://raw.githubusercontent.com/egovernments/egov-services/master/docs/works/contracts/works-common/v1-0-0.yml#/definitions/AbstractEstimateStatus'
      beneficiary:
        $ref: 'https://raw.githubusercontent.com/egovernments/egov-services/master/docs/works/contracts/works-common/v1-0-0.yml#/definitions/Beneficiary'
      modeOfAllotment:
        $ref: '#/definitions/ModeOfAllotment'
      typeOfWork:
        $ref: 'https://raw.githubusercontent.com/egovernments/egov-services/master/docs/works/contracts/works-common/v1-0-0.yml#/definitions/TypeOfWork'
      subTypeOfWork:
        $ref: 'https://raw.githubusercontent.com/egovernments/egov-services/master/docs/works/contracts/works-common/v1-0-0.yml#/definitions/TypeOfWork'
      natureOfWork: 
        $ref: 'https://raw.githubusercontent.com/egovernments/egov-services/master/docs/works/contracts/works-common/v1-0-0.yml#/definitions/NatureOfWork'
      ward:
        $ref: 'https://raw.githubusercontent.com/egovernments/egov-services/master/docs/egov-location/contracts/v1-0-0.yml#/definitions/Boundary'
      technicalSanctionNumber: 
        type: string
        pattern: '[a-zA-Z0-9-\\]'
        description: Technical sanction number of the Abstract Estimate
        maxLength: 50
        minLength: 3        
      technicalSanctionDate: 
        type: integer
        format: int64
        description: Epoch time of when technical sanctioned
      technicalSanctionBy:
        type: string
        description: User who technical sanctioned
      locality: 
        $ref: 'https://raw.githubusercontent.com/egovernments/egov-services/master/docs/egov-location/contracts/v1-0-0.yml#/definitions/Boundary'
      workCategory:
        $ref: 'https://raw.githubusercontent.com/egovernments/egov-services/master/docs/works/contracts/works-common/v1-0-0.yml#/definitions/WorkCategory'
      councilResolutionNumber:
        type: string
        pattern: '[a-zA-Z0-9-\\]'
        description: Council resolution number of the Abstract Estimate
      councilResolutionDate:
        type: string
        description: Epoch time of the council resolution date
      workOrderCreated:
        type: boolean
        description: Boolean value if work order created or not, Required only if Abstract Estimate is Spill Over
      billsCreated: 
        type: boolean
        description: Boolean value if bills created or not. Required only if Abstract Estimate is Spill Over
      spillOverFlag:  
        type: boolean
        description: Boolean value if spill over or not. Required only if Abstract Estimate is Spill Over
      cancellationReason:
        type: string
        description: Reason for cancellation of the Abstract Estimate, Required only while cancelling Abstract Estimate
        maxLength: 512
        minLength: 3
      cancellationRemarks:
        type: string
        description: Remarks for cancellation of the Abstract Estimate, Required only while cancelling Abstract Estimate
        maxLength: 512
        minLength: 3
      detailedEstimateCreated:
        type: boolean
        description: Boolean value if the detailed estimate created or not. Required only if Abstract Estimate is Spill Over
      workFlowDetails:
        $ref: 'https://raw.githubusercontent.com/egovernments/egov-services/master/docs/works/contracts/works-common/v1-0-0.yml#/definitions/WorkFlowDetails'
      stateId:
        type: string
        description: State id of the workflow
      asset:
        type: string
        description: Asset for which this Abstract Estimate created
      implementationPeriod:
        type: integer
        description: Approximate period of implementation of the work.
      fundAvailable:
        type: boolean
        description: Boolean vlaue to capture whether the fund available to execute this work.
      fundSanctioningAuthority:
        type: string
        description: The sanctioning Authority for fund to carry out the work.
      pmcRequired:
        type: boolean
        description: Boolean vlaue to capture whether the PMC need to appoint or not.
      pmcType:
        type: string
        description: If PMC required is yes then to capture PMC is from Panel or New Appointment.
      pmcName:
        type: string
        description: Name of the PMC Panel/New Appointment.
      auditDetails:
        $ref: "https://raw.githubusercontent.com/egovernments/egov-services/master/docs/common/contracts/v1-0-0.yml#/definitions/AuditDetails"
    required:
      - tenantId
      - dateOfProposal
      - referenceNumber
      - department
      - subject
      - description
      - abstractEstimateDetails
      - modeOfAllotment
      - typeOfWork
      - beneficiary
      - natureOfWork
      - ward
      - workCategory
      - status
  
  AbstractEstimateDetails:
    type: object
    description: An Object that hold Abstract Estimate Detail for a given Abstract Estimate
    properties:
      id:
        type: string
        description: Unique Identifier of the Abstract Estimate Detail
      tenantId:
        type: string
        description: Tenant id of the Abstract Estimate Details
        maxLength: 128
        minLength: 4
      abstractEstimate:
        $ref: '#/definitions/AbstractEstimate'
      nameOfWork:
        type: string
        description: Name Of Work of the Abstract Estimate Details
        maxLength: 1024
        minLength: 1
      estimateAmount:
        type: number
        format: BigDecimal
        description: Estimate amount for the Abstract Estimate Details
      estimateNumber:
        type: string
        pattern: '[a-zA-Z0-9-\\]'
        description: Estimate number of the Abstract Estimate Details.
        maxLength: 50
        minLength: 1
      grossAmountBilled:
        type: number
        format: double
        description: Gross Billed amount of the Abstract Estimate Details
      projectCode:
        $ref: '#/definitions/ProjectCode'
      abstractEstimateAppropriations:
        $ref: 'https://raw.githubusercontent.com/egovernments/egov-services/master/docs/works/contracts/works-services/v1-0-0.yml#/definitions/EstimateAppropriation'
      documentDetails:
        $ref: 'https://raw.githubusercontent.com/egovernments/egov-services/master/docs/works/contracts/works-common/v1-0-0.yml#/definitions/DocumentDetail'
      auditDetails:
        $ref: "https://raw.githubusercontent.com/egovernments/egov-services/master/docs/common/contracts/v1-0-0.yml#/definitions/AuditDetails"
    required:
      - nameOfWork
      - estimateAmount
      - estimateNumber
      - tenantId
             
  DetailedEstimateRequest:
      description: Contract class to send response. Array of Detailed Estimate items are used in case of search results, also multiple  Detailed Estimate item is used for create and update
      properties:
        requestInfo:
          $ref: 'https://raw.githubusercontent.com/egovernments/egov-services/master/docs/common/contracts/v1-0-0.yml#/definitions/RequestInfo'
        abstractEstimates:
          description: Used for create and update only
          type: array
          minimum: 1
          maximum: 100
          items:
            $ref: '#/definitions/DetailedEstimate'

  DetailedEstimateResponse:
      description: Contract class to send response. Array of Detailed Estimate items are used in case of search results, also multiple  Detailed Estimate item is used for create and update
      properties:
        responseInfo:
          $ref: 'https://raw.githubusercontent.com/egovernments/egov-services/master/docs/common/contracts/v1-0-0.yml#/definitions/ResponseInfo'
        abstractEstimates:
          description: Used for search result and create only
          type: array
          maximum: 500
          items:
            $ref: '#/definitions/DetailedEstimate'
            
  DetailedEstimate:
    type: object
    description: An Object holds the basic data for a Detailed Estimate
    properties:
      id:
        type: string
        description: Unique Identifier of the Detailed Estimate
      tenantId:
        type: string
        description: Tenant id of the Detailed Estimate
        maxLength: 128
        minLength: 4
      estimateNumber:
        type: string
        pattern: '[a-zA-Z0-9-\\]'
        description: Unique number for the Detailed Estimate
        maxLength: 50
        minLength: 1
      estimateDate:
        type: integer
        format: int64
        description: Epoch time of the Detailed Estimate Created
      nameOfWork:
        type: string
        description: name of the work of Detailed Estimate Details
        maxLength: 1024
        minLength: 1
      description:
        type: string
        description : description for the Detailed Estimate
        maxLength: 1024
        minLength: 1
      department:
        type: string
        description: Department for which Detailed Estimate belongs to
      adminSanctionNumber:
        type: string
        pattern: '[a-zA-Z0-9-\\]'
        description: Unique number after admin sanction for the Detailed Estimate
      adminSanctionDate:
        type: integer
        format: int64
        description:  Epoch time of when the admin santion is done
      adminSanctionBy:
        type: string
        description: user who admin sanctioned
      status:
        $ref: 'https://raw.githubusercontent.com/egovernments/egov-services/master/docs/works/contracts/works-common/v1-0-0.yml#/definitions/DetailedEstimateStatus'
      workValue:
        type: number
        format: BigDecimal
        description: Work value of the Detailed Estimate
        maxLength: 20
      estimateValue:
        type: number
        format: BigDecimal
        description: Estimate value of the Detailed Estimate
        maxLength: 20
      projectCode:
        $ref: '#/definitions/ProjectCode'
      #parent:
       # $ref: '#/definitions/DetailedEstimate'
      parent:
        type: string
        description: Parent of the Detailed Estimate 
      #copiedFrom:
       # $ref: '#/definitions/DetailedEstimate'
      copiedFrom:
        type: string
        description: Refers to the Detailed Estimate   
      approvedDate:
        type: integer
        format: int64
        description: Epoch time of when Detailed Estimate created
      approvedBy:
        type: string
        description: Unique username of the user who approved Detailed Estimate
      copiedEstimate:
        type: boolean
        description: Boolean value to identify whether the Detailed Estimate is copied from another estimate      
      beneficiary:
        $ref: 'https://raw.githubusercontent.com/egovernments/egov-services/master/docs/works/contracts/works-common/v1-0-0.yml#/definitions/Beneficiary'
      modeOfAllotment:
        $ref: '#/definitions/ModeOfAllotment'
      worksType:
        $ref: 'https://raw.githubusercontent.com/egovernments/egov-services/master/docs/works/contracts/works-common/v1-0-0.yml#/definitions/TypeOfWork'
      worksSubtype:
        $ref: 'https://raw.githubusercontent.com/egovernments/egov-services/master/docs/works/contracts/works-common/v1-0-0.yml#/definitions/TypeOfWork'
      natureOfWork: 
        $ref: 'https://raw.githubusercontent.com/egovernments/egov-services/master/docs/works/contracts/works-common/v1-0-0.yml#/definitions/NatureOfWork'
      ward:
        type: string
        description: Ward of the Detailed Estimate
      location:
        type: string
        description: Location of the Detailed Estimate
      latitude:
        type: integer
        format: double
        description: Latitude of the location
      longitude:
        type: integer
        format: double
        description: Longitude of the location
      workCategory:
        $ref: 'https://raw.githubusercontent.com/egovernments/egov-services/master/docs/works/contracts/works-common/v1-0-0.yml#/definitions/WorkCategory'
      locality:
        type: string
        description: Locality of the Detailed Estimate
      councilResolutionNumber:
        type: string
        description: council resolution number of the Detailed Estimate
        maxLength: 50
        minLength: 3
      councilResolutionDate:
        type: string
        description: Epoch time of the council resolution date
      workOrderCreated:
        type: boolean
        description: Boolean value to identify whether the work order created or not for spillover data 
      billsCreated: 
        type: boolean
        description: Boolean value to identify whether the bills created or not for spillover data 
      spillOverFlag:  
        type: boolean
        description: Boolean value to identify whether the spill over or not
      grossAmountBilled:  
        type: integer
        format: BigDecimal
        description: Gross Amount Billed if billsCreated flag is true 
      cancellationReason:
        type: string
        description: Reason for cancellation of the Detailed Estimate, Required only while cancelling Detailed Estimate
      cancellationRemarks:
        type: string
        description: Remarks for cancellation of the Detailed Estimate, Required only while cancelling Detailed Estimate
        maxLength: 512
        minLength: 3
      totalIncludingRE:
        type: integer
        format: BigDecimal
        description: Total Estimate Amount including Revision Estimates
      abstractEstimateDetail:
        $ref: '#/definitions/AbstractEstimateDetails'
      #estimateActivities:
       # type: array
       # description: Array of Estimate Activities
      #  items:
       #   $ref: '#/definitions/EstimateActivity' 
      multiYearEstimates:
        type: array
        description: Multiyear Estimate list for the Abstract Estimate
        items:
          $ref: '#/definitions/MultiYearEstimate'
      #estimateTechnicalSanctions:
        #type: array
        #description: Technical Sanction list for the Abstract Estimate
        #items:
          #$ref: '#/definitions/EstimateTechnicalSanction'
      detailedEstimateDeductions:
        type: array
        description: Detailed Estimate Deduction list for the Abstract Estimate
        items:
          $ref: '#/definitions/DetailedEstimateDeduction'
      documentDetails:
        type: array
        description: Array of document details
        items:
          $ref: 'https://raw.githubusercontent.com/egovernments/egov-services/master/docs/works/contracts/works-common/v1-0-0.yml#/definitions/DocumentDetail'
      assetValues:
        type: array
        description: Asstet Values for Detailed Estimate
        items:
          $ref: '#/definitions/AssetsForEstimate'
      overheadValues:
        type: array
        description: Array of Overhead Values
        items:
          $ref: '#/definitions/OverheadValue'
      workFlowDetails:
        $ref: 'https://raw.githubusercontent.com/egovernments/egov-services/master/docs/works/contracts/works-common/v1-0-0.yml#/definitions/WorkFlowDetails'
      stateId:
        type: string
        description: State id of the workflow
      fund:
        type: string
        description: Fund of the Detailed Estimate
      function:
        type: string
        description: Function of the Detailed Estimate
      functionary:
        type: string
        description: Functionary of the Detailed Estimate
      scheme:
        type: string
        description: Scheme of the Detailed Estimate
      subScheme:
        type: string
        description: Sub Scheme of the Detailed Estimate
      budgetGroup:
        type: string
        description: Budget Group of the Detailed Estimate
      auditDetails:
        $ref: "https://raw.githubusercontent.com/egovernments/egov-services/master/docs/common/contracts/v1-0-0.yml#/definitions/AuditDetails"
    required:
      - tenantId
      - estimateNumber
      - nameOfWork
      - estimateDate
      - worksType
      - natureOfWork
      - ward
      - status
      - department
      - description
  
  OverheadValue:
      type: object
      description: An Object holds the basic data for a Over Head Value
      properties:
        id:
          type: string
          description: Unique Identifier of the Overhead Value
        tenantId:
          type: string
          description: Tenant id of the Overhead Value
          maxLength: 128
          minLength: 4
        overhead:
          $ref: 'https://raw.githubusercontent.com/egovernments/egov-services/master/docs/works/contracts/works-common/v1-0-0.yml#/definitions/Overhead'
        amount:
          type: integer
          format: BigDecimal
          description: Overhead amount
        detailedEstimate:
          $ref: '#/definitions/DetailedEstimate'
        auditDetails:
          $ref: "https://raw.githubusercontent.com/egovernments/egov-services/master/docs/common/contracts/v1-0-0.yml#/definitions/AuditDetails"
      required:
        - tenantId
        - overhead
        - amount
        - detailedEstimate
      
  AssetsForEstimate:
      type: object
      description: An Object holds the basic data for a Assets for Estimate
      properties:
        id:
          type: string
          description: Unique Identifier of the Assets For Estimate
        tenantId:
          type: string
          description: Tenant id of the Assets For Estimate
          maxLength: 128
          minLength: 4
        assetCode:
          type: string
          description: Code of the Asset
          pattern: '[a-zA-Z0-9-\\]'
          minLength: 1
          maxLength: 100
        detailedEstimate:
          $ref: '#/definitions/DetailedEstimate'
        auditDetails:
          $ref: "https://raw.githubusercontent.com/egovernments/egov-services/master/docs/common/contracts/v1-0-0.yml#/definitions/AuditDetails"
      required:
        - tenantId
        - assetCode
        - detailedEstimate
      
  EstimateActivity:
      type: object
      description: An Object holds the basic data for a Estimate Activity
      properties:
        id:
          type: string
          description: Unique Identifier of the Estimate Activity
        tenantId:
          type: string
          description: Tenant id of the Estimate Activity
          maxLength: 128
          minLength: 4
        schedule:
          $ref: 'https://raw.githubusercontent.com/egovernments/egov-services/master/docs/works/contracts/works-common/v1-0-0.yml#/definitions/ScheduleOfRate'
        nonSor:
          $ref: 'https://raw.githubusercontent.com/egovernments/egov-services/master/docs/works/contracts/works-common/v1-0-0.yml#/definitions/NonSOR'
        uom:
          type: string
          description: UOM for the Estimate Activity
        unitRate:
          type: integer
          format: BigDecimal
          description: Unit Rate of the Estimate Activity
        estimateRate:
          type: integer
          format: BigDecimal
          description: Estimate Rate of the Estimate Activity
        quantity:
          type: integer
          format: double
          description: Quantity of the Estimate Activity
        serviceTaxPerc:
          type: integer
          format: double
          description: Service Tax Percentage of the Estimate Activity
        revisionType:
          $ref: 'https://raw.githubusercontent.com/egovernments/egov-services/master/docs/works/contracts/works-common/v1-0-0.yml#/definitions/RevisionType'
        #parent:
        #  $ref: '#/definitions/EstimateActivity'
        parent:
          type: string
          description: Parent of the Estimate Activity
        detailedEstimate:
          $ref: '#/definitions/DetailedEstimate'
        measurementSheetList:
          type: array
          description: Measurement sheet list for the Estimate Activity
          items:
            $ref: '#/definitions/MeasurementSheet'
        auditDetails:
          $ref: "https://raw.githubusercontent.com/egovernments/egov-services/master/docs/common/contracts/v1-0-0.yml#/definitions/AuditDetails"
      required:
        - tenantId
        - uom
        - unitRate
        - estimateRate
        - detailedEstimate
        - quantity
    
  MeasurementSheet:
      type: object
      description: An Object holds the basic data for a Measurement Sheet
      properties:
        id:
          type: string
          description: Unique Identifier of the Measurement Sheet
        tenantId:
          type: string
          description: tenant id of the Measurement Sheet
          maxLength: 128
          minLength: 4
        slNo:
          type: integer
          description: sl No of the Measurement sheet
          pattern: "[0-9]"
          maxLength: 10
          minLength: 1
        identifier:
          type: string
          description: identifier of the Measurement sheet
        remarks:
          type: string
          description: remarks of the Measurement sheet
          pattern: "[0-9a-zA-Z_@./#&+-/!(){}\",^$%*|=;:<>?`~ ]"
          maxLength: 1024
        no:
          type: integer
          format: BigDecimal
          description: no of the Measurement sheet
          pattern: "[0-9.]"
          maxLength: 10
        length:
          type: integer
          format: BigDecimal
          description: length of the Measurement sheet
          pattern: "[0-9.]"
          maxLength: 10
        width:
          type: integer
          format: BigDecimal
          description: width of the Measurement sheet
          pattern: "[0-9.]"
          maxLength: 10
        depthOrHeight:
          type: integer
          format: BigDecimal
          description: depth Or Height of the Measurement sheet
          pattern: "[0-9.]"
          maxLength: 10
        quantity:
          type: integer
          format: BigDecimal
          description: quantity of the Measurement sheet
          pattern: "[0-9.]"
          maxLength: 10
        estimateActivity:
          $ref: '#/definitions/EstimateActivity'
        #parent:
        #  $ref: '#/definitions/MeasurementSheet'
        parent:
          type: string
          description: Parent of the Measurement sheet
        auditDetails:
          $ref: "https://raw.githubusercontent.com/egovernments/egov-services/master/docs/common/contracts/v1-0-0.yml#/definitions/AuditDetails"
      required:
        - tenantId
        - quantity
        - estimateActivity
        
  MultiYearEstimate:
      type: object
      description: An Object holds the basic data for a Multi Year Estimate
      properties:
        id:
          type: string
          description: Unique Identifier of the Multi Year Estimate
        tenantId:
          type: string
          description: Tenant id of the Multi Year Estimate
          maxLength: 128
          minLength: 4
        financialYear:
          type: string
          description: Financial Year of the Multi Year Estimate
        detailedEstimate:
          $ref: '#/definitions/DetailedEstimate'
        percentage:
          type: integer
          format: double
          description: Percentage for the Multi Year Estimate
        auditDetails:
          $ref: "https://raw.githubusercontent.com/egovernments/egov-services/master/docs/common/contracts/v1-0-0.yml#/definitions/AuditDetails"
      required:
        - tenantId
        - financialYear
        - detailedEstimate
        - percentage
      
  EstimateTechnicalSanction:
      type: object
      description: An Object holds the basic data for a Estimate Technical Sanction
      properties:
        id:
          type: string
          description: Unique Identifier of the Estimate Technical Sanction
        tenantId:
          type: string
          description: Tenant id of the Estimate Technical Sanction
          maxLength: 128
          minLength: 4
        technicalSanctionNumber:
          type: string
          pattern: '[a-zA-Z0-9-\\]'
          description: Technical Sanction Number of the Detailed Estimate
          maxLength: 50
          minLength: 1
        detailedEstimate:
          $ref: '#/definitions/DetailedEstimate'
        technicalSanctionDate:
          type: integer
          format: int64
          description: Epoch time of the Technical Sanction Date
        technicalSanctionBy:
          type: string
          description: User who technical sanctioned Detailed Estimate
        auditDetails:
          $ref: "https://raw.githubusercontent.com/egovernments/egov-services/master/docs/common/contracts/v1-0-0.yml#/definitions/AuditDetails"
      required:
        - tenantId
        - technicalSanctionNumber
        - detailedEstimate
        - technicalSanctionDate
        - technicalSanctionBy
      
  DetailedEstimateDeduction:
      type: object
      description: An Object holds the basic data for a Detailed Estimate Deduction
      properties:
        id:
          type: string
          description: Unique Identifier of the Detailed Estimate Deduction
        tenantId:
          type: string
          description: Tenant id of the Detailed Estimate Deduction
          maxLength: 128
          minLength: 4
        chartOfAccounts:
          type: string
          description: Chart Of Accounts of the Detailed Estimate Deduction
        detailedEstimate:
          $ref: '#/definitions/DetailedEstimate'
        percentage:
          type: integer
          format: double
          pattern: "[0-9.]"
          description: Percentage for the Detailed Estimate Deduction
          minimum: 0.0
        amount:
          type: integer
          format: BigDecimal
          maxLength: 12
          minLength: 1
          description: Amount for the Detailed Estimate Deduction
        auditDetails:
          $ref: "https://raw.githubusercontent.com/egovernments/egov-services/master/docs/common/contracts/v1-0-0.yml#/definitions/AuditDetails"
      required:
        - tenantId
      
  ProjectCode:
      type: object
      description: An Object holds the basic data for a Project Code
      properties:
        id:
          type: string
          description: Unique Identifier of the Project Code
        tenantId:
          type: string
          description: Tenant id of the Project Code
          maxLength: 128
          minLength: 4
        code:
          type: string
          description: Code of the Project 
          pattern: '[a-zA-Z0-9-\\]'
          minLength: 1
          maxLength: 100
        detailedEstimate:
          $ref: '#/definitions/DetailedEstimate'
        description:
          type: string
          pattern: "[0-9a-zA-Z_@./#&+-/!(){}\",^$%*|=;:<>?`~ ]"
          description: Description of the Project
          maxLength: 1024
        name:
          type: string
          description: Name of the Project
          maxLength: 100
        status:
          $ref: 'https://raw.githubusercontent.com/egovernments/egov-services/master/docs/works/contracts/works-common/v1-0-0.yml#/definitions/ProjectCodeStatus'
        projectValue:
          type: integer
          format: BigDecimal
          pattern: "[0-9.]"
          description: Value for the Project
        completionDate:
          type: integer
          format: int64
          description: Epoch time for the project completion date
        auditDetails:
          $ref: "https://raw.githubusercontent.com/egovernments/egov-services/master/docs/common/contracts/v1-0-0.yml#/definitions/AuditDetails"
      required:
        - tenantId
        - code
        - name
      
  ModeOfAllotment:
    type: object
    properties:
      id:
        type: string
        description: Unique Identifier of the Mode Of Allotment
      tenantId:
        type: string
        description: Tenant id of the Mode Of Allotment
        maxLength: 128
        minLength: 4
      name:
        type: string
        description: Unique name of the Mode Of Allotment
        pattern: '[a-zA-Z0-9\s\.,]'
        maxLength: 100
        minLength: 1
      code:
        type: string
        description: Unique code of the Mode Of Allotment
        pattern: '[a-zA-Z0-9-\\]'
        maxLength: 100
        minLength: 1
    required:
      - tenantId
      - name
      - code
      
  RevisionEstimate:
    type: object
    description: An Object that hold Revision Estimate data
    allOf:
        - $ref: '#/definitions/DetailedEstimate'
    properties:
      id:
        type: string
        description: Unique Identifier of the RevisionEstimate
      tenantId:
        type: string
        description: Tenant id of the Revision Estimate
        maxLength: 128
        minLength: 4
      auditDetails:
        $ref: "https://raw.githubusercontent.com/egovernments/egov-services/master/docs/common/contracts/v1-0-0.yml#/definitions/AuditDetails"
    required:
      - tenantId
      
  RevisionEstimateRequest:
      description: Contract class to send response. Array of Revision Estimate items are used in case of search results, also multiple  Revision Estimate item is used for create and update
      properties:
        requestInfo:
          $ref: 'https://raw.githubusercontent.com/egovernments/egov-services/master/docs/common/contracts/v1-0-0.yml#/definitions/RequestInfo'
        revisionEstimates:
          description: Used for create and update only
          type: array
          minimum: 1
          maximum: 100
          items:
            $ref: '#/definitions/RevisionEstimate'

  RevisionEstimateResponse:
      description: Contract class to send response. Array of Revision Estimate items are used in case of search results, also multiple  Revision Estimate item is used for create and update
      properties:
        responseInfo:
          $ref: 'https://raw.githubusercontent.com/egovernments/egov-services/master/docs/common/contracts/v1-0-0.yml#/definitions/ResponseInfo'
        RevisiontEstimates:
          description: Used for search result and create only
          type: array
          maximum: 500
          items:
            $ref: '#/definitions/RevisionEstimate'

tags:
  - name: Abstract Estimate
    description: APIs required for Abstract Estimate.
  - name: Detailed Estimate
    description: APIs required for Detailed Estimate.
  - name: Revision Estimate
    description: APIs required for Revision Estimate.


