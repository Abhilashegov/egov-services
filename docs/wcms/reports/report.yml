---
ReportDefinitions:
- reportName: OutstandingRegister
  summary: Outstanding Register Report
  version: 1.0.0
  moduleName: wcms
  sourceColumns:
  - name: boundaryname
    label: reports.wcms.wardno
    type: string
    source: wcms
  - name: consumerno
    label: reports.wcms.consumerno
    type: number
    source: wcms
  - name: consumername
    label: reports.wcms.consumername
    type: number
    source: wcms
  - name: pipesize
    label: reports.wcms.pipesize
    type: number
    source: wcms
  - name: usage
    label: reports.wcms.usage
    type: number
    source: wcms
  - name: outstanding
    label: reports.wcms.outstanding
    type: number
    source: seva
  searchParams:
  - name: fromDate
    label: reports.wcms.fromdate
    type: string
    source: wcms
    isMandatory: false
  - name: toDate
    label: reports.wcms.todate
    type: string
    source: wcms
    isMandatory: false
  query: select  boundary.name as boundaryName, dcbinfo.hscno as consumerno,dcbinfo.username as consumerName,
         dcbinfo.pipesize as pipesize,null as usage, (dcbinfo.curr_balance+dcbinfo.arr_balance) as  outstanding
         from egwtr_connection_view dcbinfo,eg_boundary boundary  where  dcbinfo.wardid=boundary.id and 
         --dcbinfo.zoneid in (1) and dcbinfo.connectionstatus = 'ACTIVE' order by boundary.name;


- reportName: DemandRegister
  summary: Demand Register Report
  version: 1.0.0
  moduleName: wcms
  sourceColumns:
  - name: consumerno
    label: reports.wcms.consumerno
    type: string
    source: wcms
  - name: consumername
    label: reports.wcms.consumername
    type: number
    source: wcms
  - name: billnumber
    label: reports.wcms.billnumber
    type: number
    source: wcms
  - name: arrear
    label: reports.wcms.arrear
    type: number
    source: wcms
  - name: current
    label: reports.wcms.current
    type: number
    source: wcms
  - name: advance
    label: reports.wcms.advance
    type: number
    source: seva
  - name: total
    label: reports.wcms.total
    type: number
    source: seva
    rowTotal: true
   searchParams:
  - name: fromDate
    label: reports.wcms.fromdate
    type: string
    source: seva
    isMandatory: false
  - name: toDate
    label: reports.wcms.todate
    type: string
    source: seva
    isMandatory: false
  query: select  boundary.name as boundaryName, dcbinfo.hscno as consumerno,dcbinfo.username as consumerName,
         dcbinfo.pipesize as pipesize,null as usage, billdet.billno as BillNumber,(dcbinfo.curr_balance) as  Current,
         dcbinfo.arr_demand as Arrear,dcbinfo.advance_coll as Advance from egwtr_connection_view dcbinfo,eg_boundary boundary,egbs_billdetail billdet where  dcbinfo.wardid=boundary.id and 
         billdet.consumercode=dcbinfo.hscno and dcbinfo.connectionstatus = 'ACTIVE' order by boundary.name;
  
- reportName: DCBReport
  summary: DCB Report
  version: 1.0.0 
  moduleName: wcms
  sourceColumns:
  - name: zoneid
    label: reports.wcms.zoneid
    type: number
    source: wcms
    showColumn:false
  - name: boundaryName
    label: reports.wcms.boundaryname
    type: string
    source: wcms
  - name: countofconsumerno
    label: reports.wcms.consumercount
    type: number
    source: wcms
  - name: arr_demand
    label: reports.wcms.arreardemand
    type: number
    source: wcms
  - name: curr_demand
    label: reports.wcms.currentdemand
    type: number
    source: wcms
  - name: total_demand
    label: reports.wcms.totaldemand
    type: number
    source: wcms
  - name: arr_coll
    label: reports.wcms.arrearcollection
    type: number
    source: wcms
  - name: curr_coll
    label: reports.wcms.currentcollection
    type: number
    source: wcms  
  - name: total_coll
    label: reports.wcms.totalcollection
    type: number
    source: wcms  
  - name: arr_balance
    label: reports.wcms.arrearbalance
    type: number
    source: wcms  
  - name: curr_balance
    label: reports.wcms.currentbalance
    type: number
    source: wcms
  - name: total_balance
    label: reports.wcms.totalbalance
    type: number
    source: wcms   
  searchParams:
  - name: zoneid
    label: reports.wcms.zoneid
    type: singlevaluelist
    pattern: 
    source: wcms
    isMandatory: false
  - name: wardid
    label: reports.wcms.ward
    type: singlevaluelist
    source: wcms
    pattern: 
    isMandatory: false
  - name: connectiontype
    label: reports.wcms.connectiontype
    type: singlevaluelist
    pattern: 'list://METERED:METERED,NON-METERED:NON-METERED'
    source: wcms
    isMandatory: false  
  query: select  distinct cast(dcbinfo.zoneid as integer) as zoneid,boundary.name as boundaryName, count(hscno) as countofconsumerno,
         cast(SUM(arr_demand) as bigint) AS arr_demand,cast(SUM(curr_demand) as bigint) AS curr_demand,cast(SUM(arr_demand+curr_demand) as bigint) as total_demand,
         cast(SUM(arr_coll) as bigint) AS arr_coll,cast(SUM(curr_coll) as bigint) AS curr_coll,cast(SUM(arr_coll+curr_coll) as bigint) AS total_coll,
         cast(SUM(arr_balance) as bigint) AS arr_balance,cast(SUM(curr_balance) as bigint) AS curr_balance,cast(SUM(arr_balance+curr_balance) as bigint) AS total_balance
         from egwtr_connection_view dcbinfo,eg_boundary boundary  where  dcbinfo.zoneid=boundary.id and dcbinfo.zoneid in (1) and dcbinfo.billingtype in ('METERED') and dcbinfo.connectionstatus = 'ACTIVE'
         group by dcbinfo.zoneid,boundary.name order by boundary.name;